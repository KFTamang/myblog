+++
subtitle = ""
description = ""
date = "2019-04-13T01:16:41+09:00"
author = "KFTamang"
image = ""
tags = [
  "環境モニタ"
]
categories = [
  "Tech",
]
title = "環境モニタの製作"

+++

# 背景

これから夏がやってくるとクーラーのお世話になる時間がながくなります。
出かけている間にクーラーを付けっ放しにするのは（おそらく）不経済であるため、
住人が全員外出してるのにクーラーがオンの状態になっているときはアラートを出して、
外出先から運転を停止されることができると便利です。
また、冬場には部屋を閉め切って暖房を使うため、二酸化炭素の濃度が上昇し
生産性や健康に害を及ぼす可能性があります。
そのほかの空気中のガスをモニターしておくことで換気などのアラートを出すことができます。

また、気温や湿度のログを取っておくことで、電気節約や結露防止対策などの有効性検討の材料とすることができます。


以上の点から共有スペースの気温・湿度、有害物質気体の濃度などを計測的に測定し、
ログを残すとともにエアコンや換気扇を操作できるようにします。

# 機器の構成
使用した部品は以下の表に示しています。

* ラズベリーパイ3 モデルB+ 
* 温湿度センサ DHT11
* 炭素皮膜抵抗 1k ohm
* 温度・気圧センサ BMP280
* 赤外線LED *
* 赤外線受信モジュール *

(ただし*印は未実装)


機器の構成は絵のとおり、ラズパイのGPIOにDHT11を接続し気温・湿度を取得します。
接続していませんが、温度・気圧センサであるBMP280はI2C通信でラズパイと接続します。
気温・湿度・気圧は10分ごとに計測し、IFTTT経由でGoogle Driveのスプレッドシートに記録します。
またラズパイ上ではslackとの通信を行うslackbotを走らせ、
専用チャンネルに「温度」を含む文章の投稿に反応して温湿度を投稿するようにしています。

まだ未実装ですが、赤外線送信用のLEDと赤外線受信モジュールをGPIOに接続し、
IRLRというPythonライブラリを利用して家電（今のところエアコン）を操作できるようにする予定です。



# 動作

スクリーンショットのようにslackの投稿に反応して部屋の温度・湿度を返してくれます。
![動作](/images/environmental_sonsor.png)


# 参考文献

[格安スマートリモコンの作り方 - Qiita](https://qiita.com/takjg/items/e6b8af53421be54b62c9)


