+++
date = "2019-04-20T21:47:09+09:00"
author = "KFTamang"
image = ""
tags = [
 "環境モニタ",
]
categories = [
  "Tech",
]
title = "赤外線リモコンをラズパイから操作する"
subtitle = ""
description = ""
googleAnalytics = "UA-83537418-2"

+++

# 前回のまとめと今回の内容

前回の記事で室内の環境モニタを構築し、slack上から部屋の温湿度を確認することができるようになりました。
しかし、目的はこれで終わりではなく、あくまで部屋の空調を外部から操作できるようにすることにあります。
そのためにラズパイからエアコンを操作できるようにします。


# ラズパイから赤外線リモコンの操作

ラズパイからエアコンを操作する場合、もっともよく用いられる方法は赤外線LEDを使用してリモコンのコードを再現し、
リモコンから操作を受けているようエアコンに誤認させる方法です。
そのメリットとして、

* 数百円の電子部品で製作可能
* 多くの機種に対応
* エアコン以外の家電操作にも応用可能

といった特徴があるからです。
そのほかには、[Nature Remo](https://nature.global/)という製品があります。
これも赤外線のコードを送信することによりAPI経由で様々な家電を操作できるようです。
ただ、価格は7000円程度とエアコンを動かすだけにはもったいないお値段がします。
なにより自分で作ったほうがやってる感がある。
というわけで以下のサイトを参考に赤外線を送受信する回路を組んでみました。

## 参考

[格安スマートリモコンの作り方 - Qiita](https://qiita.com/takjg/items/e6b8af53421be54b62c9)

[赤外線LEDドライブ回路の決定版 - 電脳伝説](https://vintagechips.wordpress.com/2013/10/05/%E8%B5%A4%E5%A4%96%E7%B7%9Aled%E3%83%89%E3%83%A9%E3%82%A4%E3%8\
3%96%E5%9B%9E%E8%B7%AF%E3%81%AE%E6%B1%BA%E5%AE%9A%E7%89%88/)

-----------

# 回路図

雑な回路図を示します。実際の配線に即した図となっています。
![回路図](/images/P_20190420_222808_vHDR_Auto.jpg)


# ブレッドボードによる仮組み

いきなりユニバーサル基板に実装して失敗すると目も当てられないので、
まずブレッドボードに仮組みして動作確認をしました。


赤外線なので目には見えませんが、スマートフォンで写真を撮ると光っていることが確認できます。
![ブレッドボード](/images/P_20190415_234335_vHDR_On.jpg)

LEDの発光が確認できたら、さらにエアコンの操作ができるかチェックを行います。
赤外線受信モジュールにリモコンを向けてボタンを押し、コードを記録します。
その次にLEDをエアコンに向けてコードを再現すると、押したボタンの操作が実行されました。
動作確認成功です。

LEDの電流を制限する抵抗の値は最初明るさを重視して27ohmとしましたが、
54ohmでも操作できたため、以後この値を使用しました。（27ohmでは連続運転の絶対定格に違反するため）


# ユニバーサル基板に本組み

動作確認がとれたところで部品を一旦外し、ユニバーサル基板に実装していきます。
仮組み試験の際、LEDには強い指向性があることが判明したため、LEDを二つ向きをずらしながら実装しています。
完成した基板がこちら。

![ユニバーサル基板](/images/P_20190416_234655_vHDR_On.jpg)

こちらでも動作確認を行い、エアコンやテレビが操作できることがわかりました。


次回はこれを使い、slack上からエアコンを操作することにしたいと思います。



